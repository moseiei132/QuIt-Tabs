<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuIt Tab Manager</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <!-- Include SVG Icons -->
  <div style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg">
      <symbol id="icon-clock" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2" />
        <path d="M12 7v5l3 3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </symbol>
      <symbol id="icon-settings" viewBox="0 0 24 24">
        <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" fill="none" stroke="currentColor" stroke-width="2" />
        <path
          d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-search" viewBox="0 0 24 24">
        <circle cx="11" cy="11" r="8" fill="none" stroke="currentColor" stroke-width="2" />
        <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </symbol>
      <symbol id="icon-pause" viewBox="0 0 24 24">
        <rect x="6" y="4" width="4" height="16" rx="1" fill="currentColor" />
        <rect x="14" y="4" width="4" height="16" rx="1" fill="currentColor" />
      </symbol>
      <symbol id="icon-play" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z" fill="currentColor" />
      </symbol>
      <symbol id="icon-shield" viewBox="0 0 24 24">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-shield-filled" viewBox="0 0 24 24">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" fill="currentColor" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-folder" viewBox="0 0 24 24">
        <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-close" viewBox="0 0 24 24">
        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </symbol>
      <symbol id="icon-globe" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" />
        <path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10zM2.05 12H22"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-link" viewBox="0 0 24 24">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-unlink" viewBox="0 0 24 24">
        <path
          d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71M3 3l18 18"
          fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="icon-eye" viewBox="0 0 24 24">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round" />
        <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2" />
      </symbol>
      <symbol id="icon-merge" viewBox="0 0 24 24">
        <path d="M6 3v6l6 6 6-6V3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M12 15v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </symbol>
      <symbol id="icon-file" viewBox="0 0 24 24">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <polyline points="14 2 14 8 20 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
      </symbol>
    </svg>
  </div>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <svg class="logo-icon" width="18" height="18">
            <use href="#icon-clock" />
          </svg>
          <h1>QuIt</h1>
        </div>
        <!-- Compact current tab info (shown when section collapsed) -->
        <div id="compactTabInfo" class="compact-tab-info" style="display: none;">
          <span class="compact-divider">|</span>
          <img id="compactFavicon" class="compact-favicon" src="" alt="">
          <span id="compactTitle" class="compact-title"></span>
          <span id="compactCountdown" class="compact-countdown"></span>
        </div>
      </div>
      <div class="header-actions">
        <button id="toggleCurrentTab" class="toggle-btn" title="Toggle Current Tab">
          <svg width="12" height="12">
            <use href="#icon-file" />
          </svg>
          Tab Details
        </button>
        <button id="settingsBtn" class="icon-btn" title="Settings">
          <svg width="18" height="18">
            <use href="#icon-settings" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Current Tab Section -->
    <section class="current-tab">
      <div class="current-tab-content">
        <div id="currentTabInfo" class="tab-info">
          <div class="tab-favicon" id="currentFavicon">
            <svg width="16" height="16" style="opacity: 0.3;">
              <use href="#icon-globe" />
            </svg>
          </div>
          <div class="tab-details">
            <div class="tab-title">Loading...</div>
            <div class="tab-url">—</div>
          </div>
          <div id="currentTabCountdown" class="countdown">
            <span class="countdown-time">—</span>
          </div>
        </div>

        <div class="quick-actions">
          <button id="protectBtn" class="btn btn-secondary" title="Protect this tab">
            <svg width="14" height="14" id="protectIcon">
              <use href="#icon-shield" />
            </svg>
            Protected
          </button>
        </div>
    </section>

    <!-- All Tabs List -->
    <section class="tabs-section">
      <div class="section-header">
        <h2>All Tabs (<span id="tabCount">0</span>)</h2>
        <div class="section-actions">
          <button id="editModeBtn" class="toggle-btn" title="Edit Mode">
            <svg width="12" height="12">
              <use href="#icon-settings" />
            </svg>
            Edit
          </button>
          <button id="mergeDuplicatesBtn" class="toggle-btn" title="Merge Duplicate Tabs">
            <svg width="12" height="12">
              <use href="#icon-merge" />
            </svg>
            Merge
          </button>
          <button id="groupByWindowBtn" class="toggle-btn">
            <svg width="12" height="12">
              <use href="#icon-folder" />
            </svg>
            Window
          </button>
        </div>
      </div>

      <!-- Batch Actions Toolbar -->
      <div id="batchActionsBar" class="batch-actions-bar" style="display: none;">
        <div class="batch-info">
          (<span id="selectedCount">0</span>)
        </div>
        <div class="batch-actions">
          <select id="moveToGroupSelect" class="batch-select">
            <option value="">Group...</option>
          </select>
          <select id="moveToWindowSelect" class="batch-select">
            <option value="">Window...</option>
          </select>
          <select id="batchActionSelect" class="batch-select batch-action">
            <option value="">Action...</option>
            <option value="protect">Protect</option>
            <option value="unprotect">Unprotect</option>
            <option value="ungroup">Ungroup</option>
            <option value="close">Close</option>
          </select>
          <button id="clearSelectionBtn" class="btn-batch-clear">Clear</button>
        </div>
      </div>

      <div id="tabsList" class="tabs-list">
        <div class="loading">Loading tabs...</div>
      </div>
    </section>

    <!-- Settings Panel (hidden by default) -->
    <section id="settingsPanel" class="settings-panel" style="display: none;">
      <div class="settings-header">
        <button id="backToTabsBtn" class="icon-btn" title="Back to tabs">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
        <h2>Settings</h2>
      </div>

      <div class="settings-content">
        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Enable Extension</span>
            <span class="setting-desc">Auto-close inactive tabs</span>
          </div>
          <label class="toggle">
            <input type="checkbox" id="popupEnabledToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Countdown Timer</span>
            <span class="setting-desc">Close after N minutes</span>
          </div>
          <div class="countdown-input-group">
            <input type="number" id="popupCountdownInput" min="1" max="60" value="5" class="countdown-number">
            <span class="countdown-unit">min</span>
          </div>
        </div>

        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Auto-close Pinned</span>
            <span class="setting-desc">Include pinned tabs</span>
          </div>
          <label class="toggle">
            <input type="checkbox" id="popupAutoClosePinned">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Auto-close Special</span>
            <span class="setting-desc">Extensions, new tab, etc.</span>
          </div>
          <label class="toggle">
            <input type="checkbox" id="popupAutoCloseSpecial">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Pause on Media</span>
            <span class="setting-desc">Don't close playing tabs</span>
          </div>
          <label class="toggle">
            <input type="checkbox" id="popupPauseOnMedia">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="setting-row">
          <div class="setting-info">
            <span class="setting-label">Single Window Mode</span>
            <span class="setting-desc">Other active windows are auto-closed</span>
          </div>
          <label class="toggle">
            <input type="checkbox" id="popupFocusedWindowOnly">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <!-- Extension Info -->
        <div class="extension-info">
          <div class="extension-version">
            <span>QuIt Tabs</span>
            <span id="extensionVersion">v1.0.0</span>
          </div>
          <a href="https://github.com/moseiei132/QuIt-Tabs" target="_blank" class="github-link">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z" />
            </svg>
            GitHub
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="status">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">Active</span>
      </div>
      <div class="footer-search">
        <input type="text" id="searchInput" placeholder="Search...">
        <button id="clearSearch" class="clear-btn" style="display: none;">
          <svg width="8" height="8">
            <use href="#icon-close" />
          </svg>
        </button>
      </div>
    </footer>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu" style="display: none;">
      <div class="context-menu-items"></div>
    </div>

  </div>

  <script src="popup.js" type="module"></script>
</body>

</html>