<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuIt Tab Manager - Settings</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>QuIt Tab Manager Settings</h1>
            </div>
        </header>

        <!-- General Settings -->
        <section class="section">
            <h2>General Settings</h2>

            <div class="setting-item">
                <div class="setting-info">
                    <label for="enabledToggle">Enable Extension</label>
                    <p class="setting-description">When disabled, no tabs will be automatically closed</p>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="enabledToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-item">
                <div class="setting-info">
                    <label for="globalCountdown">Global Countdown Timer</label>
                    <p class="setting-description">Close inactive tabs after <strong id="countdownValue">5</strong>
                        minutes</p>
                </div>
                <div class="slider-container">
                    <input type="range" id="globalCountdown" min="1" max="60" value="5" step="1">
                    <div class="slider-labels">
                        <span>1m</span>
                        <span>30m</span>
                        <span>60m</span>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-info">
                    <label for="autoClosePinned">Auto-close Pinned Tabs</label>
                    <p class="setting-description">Include pinned tabs in auto-close countdown</p>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="autoClosePinned">
                    <span class="toggle-slider"></span>
                </label>
            </div>

            <div class="setting-item">
                <div class="setting-info">
                    <label for="pauseOnMedia">Pause on Media Playback</label>
                    <p class="setting-description">Don't close tabs that are playing audio or video</p>
                </div>
                <label class="toggle">
                    <input type="checkbox" id="pauseOnMedia">
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </section>

        <!-- Exclusion Rules -->
        <section class="section">
            <div class="section-header">
                <h2>Exclusion Rules</h2>
                <button id="addRuleBtn" class="btn btn-primary">+ Add Rule</button>
            </div>

            <div id="rulesContainer" class="rules-container">
                <div class="empty-state">No exclusion rules yet. Add one to protect tabs from auto-closing.</div>
            </div>

            <!-- Add/Edit Rule Form (Hidden by default) -->
            <div id="ruleForm" class="rule-form" style="display: none;">
                <h3 id="formTitle">Add Exclusion Rule</h3>

                <div class="form-group">
                    <label for="ruleType">Rule Type</label>
                    <select id="ruleType">
                        <option value="path_exact">Current Path Only</option>
                        <option value="path">Current Path + Subpaths</option>
                        <option value="domain_path">All Pages on Domain</option>
                        <option value="domain">Domain Only</option>
                        <option value="domain_all">Domain + All Subdomains</option>
                        <option value="subdomain">Subdomains Only</option>
                        <option value="exact">Exact URL</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="rulePattern">Pattern</label>
                    <input type="text" id="rulePattern" placeholder="example.com">
                    <p class="form-hint" id="patternHint">Matches only example.com</p>
                </div>

                <div class="form-group">
                    <label for="customCountdown">Custom Countdown</label>
                    <select id="customCountdown">
                        <option value="null">Never Close</option>
                        <option value="300">5 minutes</option>
                        <option value="600">10 minutes</option>
                        <option value="900">15 minutes</option>
                        <option value="1800">30 minutes</option>
                        <option value="3600">60 minutes</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button id="cancelRuleBtn" class="btn btn-secondary">Cancel</button>
                    <button id="saveRuleBtn" class="btn btn-primary">Save Rule</button>
                </div>
            </div>
        </section>

        <!-- Import/Export -->
        <section class="section">
            <h2>Import/Export Rules</h2>

            <div class="import-export">
                <button id="exportBtn" class="btn btn-secondary">Export Rules</button>
                <button id="importBtn" class="btn btn-secondary">Import Rules</button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>QuIt Tab Manager v1.0.0</p>
            <p class="save-status" id="saveStatus"></p>
        </footer>
    </div>

    <script src="options.js" type="module"></script>
</body>

</html>